{% extends 'accounts/layouts/starter.html' %}

{% block title %} Dashboard {% endblock %}

{% block content %}
  
  <div class="row mb-2">
    <div class="col-sm-6">
      <h1 class="m-0">
        Patient Dashboard
      </h1>
    </div><!-- /.col -->
    <div class="col-sm-6">
      <ol class="breadcrumb float-sm-right">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item active">Starter Page</li>
      </ol>
    </div><!-- /.col -->
  </div><!-- /.row -->
</div><!-- /.container-fluid -->
</div>
<!-- /.content-header -->

<!-- Main content -->
<div class="content">
<div class="container-fluid">
  <div class="row">
  
    <div class="col-md-8">
      <div class="card card-primary card-outline">
        <div class="card-header bg-primary">
          <h5 class="m-0">My Appointments</h5>
        </div>
        <div class="row appointment-messages">
            {% if messages %}
            <!-- <div class="col-6 alert alert-warning alert-dismissable fade show" role="alert"">
            
              <ul class="messages">
                {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
              </ul>

              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div> -->
            {% for message in messages %}
            <div class="alert alert-warning alert-dismissible fade show col-8" role="alert">
              {{message}}
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            {% endfor %}

            {% endif %}
        </div>
        
        {% for appointment in appointments %}

        <div class="card-body">
          <h6 class="card-title">
            Appointment with <span class="">Dr. {{ appointment.doctor.get_full_name.title}}</span> on {{appointment.appointment_date}} {{ appointment.appointment_time}}
          </h6>
          <p class="card-text float-left">               
            Department: <span>{{ appointment.doctor.doctorprofile.department }}</span>
          </p>
           
            <a href="{% url 'appointments:view_details' appointment.id %}" class="btn btn-primary float-right">View Details</a>
        
        </div>
        <hr>
        {% endfor %}
      </div>
    </div>
    <!-- /.col-md-6 -->
    <div class="col-md-4">
      <div class="card card-secondary card-outline">
        <div class="card-header bg-secondary">
          <h5 class="m-0">Actions</h5>
        </div>
        
        <div class="card-body">
          <ul class="patient-actions" style="list-style-type: none;">
            <li><a href="{% url 'appointments:create_appointment' %}">Create an appointment...</a></li>
            <!-- <li><a href="{% url 'appointments:doctor_availability' %}">Check for doctor availability...</a></li> -->
          </ul>
        </div>
       
      </div>
    </div>
  </div>
  <!-- /.row -->

{% endblock content %}